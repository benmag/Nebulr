<html>
<head>
	<title>Nebulr</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
	<style>
	body {
		margin: 0;
	}
	.colorgraph {
		margin-top:0px;
		height: 5px;
		border-top: 0;
		background: #c4e17f;
		background-image: -webkit-linear-gradient(left, #c4e17f, #c4e17f 12.5%, #f7fdca 12.5%, #f7fdca 25%, #fecf71 25%, #fecf71 37.5%, #f0776c 37.5%, #f0776c 50%, #db9dbe 50%, #db9dbe 62.5%, #c49cde 62.5%, #c49cde 75%, #669ae1 75%, #669ae1 87.5%, #62c2e4 87.5%, #62c2e4);
		background-image: -moz-linear-gradient(left, #c4e17f, #c4e17f 12.5%, #f7fdca 12.5%, #f7fdca 25%, #fecf71 25%, #fecf71 37.5%, #f0776c 37.5%, #f0776c 50%, #db9dbe 50%, #db9dbe 62.5%, #c49cde 62.5%, #c49cde 75%, #669ae1 75%, #669ae1 87.5%, #62c2e4 87.5%, #62c2e4);
		background-image: -o-linear-gradient(left, #c4e17f, #c4e17f 12.5%, #f7fdca 12.5%, #f7fdca 25%, #fecf71 25%, #fecf71 37.5%, #f0776c 37.5%, #f0776c 50%, #db9dbe 50%, #db9dbe 62.5%, #c49cde 62.5%, #c49cde 75%, #669ae1 75%, #669ae1 87.5%, #62c2e4 87.5%, #62c2e4);
		background-image: linear-gradient(to right, #c4e17f, #c4e17f 12.5%, #f7fdca 12.5%, #f7fdca 25%, #fecf71 25%, #fecf71 37.5%, #f0776c 37.5%, #f0776c 50%, #db9dbe 50%, #db9dbe 62.5%, #c49cde 62.5%, #c49cde 75%, #669ae1 75%, #669ae1 87.5%, #62c2e4 87.5%, #62c2e4);
	}


	.avatar {
		border: 1px solid silver;
		box-shadow: rgba(0,0,0,.2) 0 0 3px;
		border-radius: 50%;
		-moz-animation: shadow .8s ease-in;
		-webkit-animation: shadow .8s ease-in;
		animation: shadow .8s ease-in;
		transition: all .2s ease-in-out;
		max-width: 95px;
	}

	.info {
		padding-left: 20px;
	}

	.name {
		font-size: 1.7em;
		font-weight: 700;
	}

	#connectOverlay {
	    position: fixed;
	    top: 0px;
	    left: 0px;
	    width: 100%;
	    height: 100%;
	    z-index: 4000;
	    /*background-color: rgba(0, 0, 0, 0.7);*/
	    background-color: #ec5148;
	    -webkit-transition: all 0.5s ease-in-out;
		-moz-transition: all 0.5s ease-in-out;
		-o-transition: all 0.5s ease-in-out;
		-ms-transition: all 0.5s ease-in-out;
		transition: all 0.5s ease-in-out;

	    -webkit-transform: translate(0px, -100%) scale(0, 0);
		-moz-transform: translate(0px, -100%) scale(0, 0);
		-o-transform: translate(0px, -100%) scale(0, 0);
		-ms-transform: translate(0px, -100%) scale(0, 0);
		transform: translate(0px, -100%) scale(0, 0);
	    
	    opacity: 0;
	}

	#connectOverlay.open {
	    -webkit-transform: translate(0px, 0px) scale(1, 1);
	    -moz-transform: translate(0px, 0px) scale(1, 1);
		-o-transform: translate(0px, 0px) scale(1, 1);
		-ms-transform: translate(0px, 0px) scale(1, 1);
		transform: translate(0px, 0px) scale(1, 1); 
	    opacity: 1;
	}

	#connectOverlay input[type="text"] {
	    position: absolute;
	    top: 50%;
	    width: 100%;
	    /*color: rgb(255, 255, 255);*/
	    color:#fff;
	    background: rgba(0, 0, 0, 0);
	    font-size: 60px;
	    font-weight: 300;
	    /*text-align: center;*/
	    border: 0px;
	    margin: 0px auto;
	    margin-top: -51px;
	    padding-left: 30px;
	    padding-right: 30px;
	    outline: none;
	}
	#connectOverlay .btn {
	    position: absolute;
	    top: 50%;
	    left: 50%;
	    margin-top: 61px;
	    margin-left: -45px;
	}
	#connectOverlay .close {
	    position: fixed;
	    top: 15px;
	    right: 15px;
	    color: #fff;
		background-color: #428bca;
		border-color: #357ebd;
		opacity: 1;
		padding: 10px 17px;
		font-size: 27px;
	}

	.list-group-item {
		cursor: pointer;
	}

/* CSS used here will be applied after bootstrap.css */
html, body { height: 100%;}

/* So that the modal is displayed in the preview.. You can probably remove this and the above rule */
.img-modal {
	position: relative;
	display: block;
}

.img-modal .modal-dialog {
    /* An arbitrary minimum height. Feel free to modify this one as well */
    min-height: 350px;
    height: 100%;
    width: 100%;
    margin: 0;
    padding: 0;	
}

.img-modal .modal-content, .img-modal .modal-body, .img-modal .row, .img-modal .modal-image {
    height: 100%;
}

.modal-content {
    border-radius: 0;
    border: 0px !important;
}

.modal-body {
    padding-top: 0;
    padding-bottom: 0;
}

.modal-image {
	background-color: #ec5148;
    padding :0;
}

.modal-image img {
    margin: 0 auto;
    max-height: 100%;
    max-width: 100%;
    
    position: relative;
    top: 50%;
    -webkit-transform: translateY(-50%);
    -ms-transform: translateY(-50%);
    transform: translateY(-50%);
}

.img-modal .img-modal-btn {
    display: block;
    position: absolute;
    top: 0;
    bottom: 0;
    background: black;
    opacity: 0;
    font-size: 1.5em;
    width: 45px;
    color: #fff;
    transition: opacity .2s ease-in;
}

.img-modal .modal-image:hover .img-modal-btn {
    opacity: 0.4;  
}

.img-modal .modal-image:hover .img-modal-btn:hover {
   opacity: 0.75;   
}

.img-modal .img-modal-btn.right {
    right: 0;
}

.img-modal .img-modal-btn i {
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    text-align: center;
    margin-top: -.75em;
}

.img-modal .modal-meta {
    position: relative;   
    height: 100%;
}

.img-modal .modal-meta-top {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 45px;
    padding: 5px 10px;
    overflow-y: auto;
}

.img-modal .modal-meta-top .img-poster img {
    height: 70px;
    width: 70px;
    float: left;
    margin-right: 15px;
}

.img-modal .modal-meta-top .img-poster strong {
    display: block; 
    padding-top: 15px;
}

.img-modal .modal-meta-top .img-poster span {
    display: block;   
    color: #aaa;
    font-size:.9em;
}

.img-modal .modal-meta-bottom {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 5px;
    border-top: solid 1px #ccc;
}

.img-modal .chatlog {
    list-style: none;  
    padding: 0;
}
.img-modal .chatlog li {
    margin:0;
    margin-top:10px;
}

.img-modal .chatlog li > div {
    display:table-cell;
}

.img-modal .chatlog img {
    border-radius:50%;
    width: 42px;
    height: 42px;
    margin-right: 10px;
    margin-top: 20px;
}

.img-modal .chatlog p {
    margin: 0;
}

.img-modal .chatlog span {
    font-size: .8em; 
    color: #aaa;
}

	</style>
</head>

<body>
<div class="modal img-modal">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-body">
        <div class="row">
            <div class="col-md-8 modal-image">
            	<div style="position:fixed;top:0;left:0; width:350px; 	background-color: rgba(0,0,0,0.3)">
            		<h1 id="username"></h1>
            		<span id="userIdent"></span>
            	</div>
                <img class="img-responsive" src="lunar.png" />
                <img class="img-responsive hidden" src="http://www.netflights.com/media/216535/hong%20kong_03_681x298.jpg" />
                <!-- <a href="" class="img-modal-btn left"><i class="glyphicon glyphicon-chevron-left"></i></a> -->
                <!-- <a href="" class="img-modal-btn right"><i class="glyphicon glyphicon-chevron-right"></i></a> -->
          	</div>
        	<div class="col-md-4 col-xs-12 modal-meta">
        		<hr class="colorgraph" style="position:absolute; top:0; left:0; right: 0;">
				<div class="modal-meta-top" style="padding-top: 15px;">
					<button type="button" class="close"><span aria-hidden="true"><i class="glyphicon glyphicon-remove"></i></span><span class="sr-only">Close</span></button>
					<div class="img-poster clearfix">
						<a href=""><img class="img-circle" src="http://www.localcrimenews.com/wp-content/uploads/2013/07/default-user-icon-profile.png"/></a>
						<strong><a id="convTitle" href=""></a></strong>
						<span id="convIdent"></span>
					</div>
				  
			  		<ul id="chatlog" class="chatlog">
					</ul>
				</div>
				<div class="modal-meta-bottom">
				  <input id="input" type="text" class="form-control" placeholder="Enter a message or command... Press ctrl+h for help" />
				</div>
          	</div>
        </div>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div>

	<!-- http://bootsnipp.com/snippets/featured/google-plus-styled-post -->
<hr class="colorgraph">
	<div class="row">
		<div class="col-sm-8 col-sm-offset-2">
			<input class="col-sm-8" type="text" placeholder="Enter ID of peer to connect with" id="connectWith" value="" />
			<input class="col-sm-3 col-sm-offset-1" type="submit" id="makeConnection" />
		</div>
	</div>
	<br />
	<div class="row">
    <div class="col-xs-12 col-sm-offset-3 col-sm-6">
        <div class="panel panel-default">
            <ul class="list-group" id="contact-list">
            </ul>
        </div>
    </div>
</div>
<div id="connectOverlay">
    <form id="connectForm" method="post" autocomplete="off">
        <input type="text" id="ident" name="ident" autocomplete="off" value="" placeholder="" />
    </form>
</div>
<li id="example-user" class="list-group-item" style="display:none;">
    <div class="col-xs-3 col-sm-3">
        <img src="http://api.randomuser.me/portraits/men/49.jpg" alt="" class="img-responsive img-circle avatar" />
    </div>
    <div class="col-xs-9 col-sm-9">
        <span class="name"></span><br/>
        <span class="ident text-muted"></span>
    </div>
    <div class="clearfix"></div>
</li>

<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<script src="http://cdn.peerjs.com/0.3/peer.js"></script>
<script src="socket.io/socket.io.js"></script>

<script src="js/nebulr.js"></script>
<script src="js/core.js"></script>
<script src="js/client/client.js"></script>
<script src="js/client/event.js"></script>
<!-- <script src="js/chat.js"></script> -->
<script>

	Nebulr.init();

	$(function(){
	    // This code is not even almost production ready. It's 2am here, and it's a cheap proof-of-concept if anything.
	    $(".img-modal-btn.right").on('click', function(e){
	        e.preventDefault();
	        cur = $(this).parent().find('img:visible()');
	        next = cur.next('img');
	        par = cur.parent();
	        if (!next.length) { next = $(cur.parent().find("img").get(0)) }
	        cur.addClass('hidden');
	        next.removeClass('hidden');
	        
	        return false;
	    })
	    
	    $(".img-modal-btn.left").on('click', function(e){
	        e.preventDefault();
	        cur = $(this).parent().find('img:visible()');
	        next = cur.prev('img');
	        par = cur.parent();
	        children = cur.parent().find("img");
	        if (!next.length) { next = $(children.get(children.length-1)) }
	        cur.addClass('hidden');
	        next.removeClass('hidden');
	        
	        return false;
	    })

	});

</script>

</body>
</html>